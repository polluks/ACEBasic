Compiler Refactoring State
===========================

Last completed: Phase 2.2 - gen_frame_addr() in codegen.c
  Branch: phase2-codegen

Phase 1 (all 6 steps) - merged to master
  1.1: Consolidated frame_ptr[] from 11 static copies to one in misc.c + extern in acedef.h
  1.2: Extracted make_ext_name() in misc.c, replaced 6 occurrences
  1.3: Extracted make_modvar_bss_name() in misc.c, replaced 4 occurrences
  1.4: Extracted alloc_die() static helper in sym.c, replaced 18 blocks
  1.5: Extracted sym_to_type() in misc.c, replaced 9 switch blocks
  1.6: Changed structmem_exist() to return STRUCM*, replaced 2 manual loops

Phase 2 (codegen layer)
  2.1: Created codegen.c with gen_rt_call(funcname) - wraps gen("jsr",...)+enter_XREF()
       - New file: src/ace/c/codegen.c
       - Prototype in acedef.h, added to Makefile-ace SOURCES
       - Replaced ~235 jsr+enter_XREF pairs across 20 source files
       - Files modified: declare.c, memory.c, misc.c, iff.c, window.c, screen.c,
         serial.c, menu.c, libfunc.c, message.c, event.c, gadget.c, print.c,
         gfx.c, assign.c, file.c, expr.c, factor.c, statement.c, basfun.c
       - LVO calls through (a6), indirect (a0), and dynamic name calls excluded
  2.2: Extracted gen_frame_addr(address, buf) into codegen.c
       - Wraps itoa(-1*address, buf, 10) + strcat(buf, frame_ptr[lev])
       - Added extern int lev to codegen.c, prototype in acedef.h
       - Replaced ~46 occurrences across 12 source files
       - Files modified: assign.c, statement.c, factor.c, sub.c, file.c,
         declare.c, misc.c, basfun.c, control.c, gfx.c, serial.c, message.c
       - Excluded: sub.c parse_shared_vars() hardcoded (a4)/(a5) for cross-level sharing

Test suite: 118/118 pass

Next step: Phase 2.3 - additional codegen helpers
