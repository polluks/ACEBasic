P96 Screen Support - Implementation State
==========================================

Current phase: ALL PHASES COMPLETE
All 4 phases implemented and verified.

Phase 1 COMPLETE - verified on emulator:
  1.1 - Generated Picasso96API.bmap (28 functions, 656 bytes)
  1.2 - Added P96 data to scrwin_data.s
  1.3 - Raised validation limits in _openscreen
  1.4 - Added _openthescreen_p96 to scrwin.s (~110 lines)
  1.5 - Added P96 close path in _closescreen
  1.6 - Tested: 800x600x8 mode 13 - all 8 checks passed
        (screen open, pointers valid, LINE/CIRCLE draw, close)

Phase 2 COMPLETE - verified on emulator:
  2.1 - Added clone-WB detection in _openthescreen_p96
        - LockPubScreen/GetVPModeID/UnlockPubScreen to read WB properties
        - Added LVO constants (-510, -516, -792) for v36+ functions
        - Clone path skips p96BestModeIDTagList, uses WB's DisplayID directly
        - Converges with explicit path at _p96_open_screen label
  2.2 - Tested: SCREEN 1, 0, 0, 0, 13 - all 8 checks passed
        (clone-WB open, pointers valid, LINE/CIRCLE draw, close)
        Regression: explicit 800x600x8 also passed all 8 checks

Phase 3 COMPLETE - verified on emulator:
  3.1 - Added 3-arg COLOR parsing in gfx.c color()
        - Restructured to detect 1-arg, 2-arg, or 3-arg form
        - 3-arg (COLOR r,g,b): pops b,g,r into d2,d1,d0, calls _color_rgb
        - 1-arg and 2-arg: unchanged behavior (common fg/changetextcolor path)
  3.2 - Added _color_rgb to scrwin.s (~12 lines)
        - Packs (r<<16)|(g<<8)|b from d0,d1,d2 registers
        - Calls SetAPen with packed 24-bit RGB value
        - Added xdef _color_rgb
  3.3 - Tested on emulator:
        - HiColor 800x600x16: COLOR r,g,b + LINE/CIRCLE - passed
        - TrueColor 800x600x24: COLOR r,g,b + LINE/CIRCLE - passed
        - 8-bit regression: existing 2-arg COLOR still works - passed
        - Clone-WB regression: all 8 checks passed

Phase 4 COMPLETE:
  4.1 - Updated docs/ref.txt COLOR section with 3-arg RGB form
  4.2 - Updated docs/ref.txt SCREEN section with mode 13 (P96/RTG)
        - Depth table (8/15/16/24/32), clone-WB syntax, error handling example

Phase overview:
  Phase 1: Basic P96 screen open/close
    1.1 Generate Picasso96API.bmap
    1.2 Add data to scrwin_data.s (_P96Base, _screen_p96_flag, _p96_taglist)
    1.3 Raise validation limits in _openscreen
    1.4 Add _openthescreen_p96 to scrwin.s
    1.5 Add P96 close path to _closescreen
    1.6 Build and test on emulator
  Phase 2: Clone WB
    2.1 Add clone-WB detection (w=0,h=0,d=0) in _openthescreen_p96
    2.2 Build and test on emulator
  Phase 3: COLOR r, g, b
  Phase 4: Documentation
